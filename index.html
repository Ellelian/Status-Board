<!DOCTYPE html><html lang="en">
<head>
<meta charset="UTF-8"><title>SaaS Status Board</title>
<style>
  body{font-family:sans-serif;background:#f5f5f5;margin:0;padding:2rem}
  #grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1rem}
  .card{padding:1rem;border-radius:12px;background:#fff;box-shadow:0 2px 6px #0002}
  .none{border-left:8px solid #4caf50}
  .minor{border-left:8px solid #ff9800}
  .major,.critical{border-left:8px solid #f44336}
  .nostatus{border-left:8px solid #9e9e9e}
</style>
</head>
<body>
<h1>Status en direct</h1>
<div id="grid">Chargement…</div>
<script>
const pages={
  activecampaign:'https://status.activecampaign.com/api/v2/status.json',
  webinarjam    :'https://status.webinarjam.com/api/v2/status.json',
  twilio        :'https://status.twilio.com/api/v2/status.json',
  manychat      :'https://status.manychat.com/api/v2/status.json',
  make          :'https://status.make.com/api/v2/status.json',
  clickfunnels  :'https://status.clickfunnels.com/api/v2/status.json',
  typeform      :'https://status.typeform.com/api/v2/status.json',
  calendly      :'https://www.calendlystatus.com/api/v2/status.json',
  gworkspace    :'https://www.google.com/appsstatus/dashboard/incidents.json',
  gcloud        :'https://status.cloud.google.com/incidents.json',
  prestashop    :'https://status.prestashop.com'           // simple ping
};
async function getIndicator(name,url){
  try{
    if(name==='prestashop'){
      const r=await fetch('https://corsproxy.io/?'+encodeURIComponent(url));
      return r.ok?'none':'major';
    }
    const r=await fetch('https://corsproxy.io/?'+encodeURIComponent(url));
    const data=await r.json();
    if(Array.isArray(data)){            // Google feeds → incidents array
      return data.length? 'major':'none';
    }
    return (data.status?.indicator)||'nostatus';
  }catch(e){return'nostatus';}
}
async function refresh(){
  const grid=document.getElementById('grid');
  grid.innerHTML='';
  for(const [n,u] of Object.entries(pages)){
    const st=await getIndicator(n,u);
    grid.insertAdjacentHTML('beforeend',
      `<div class="card ${st}"><b>${n}</b><br>${st}</div>`);
  }
}
refresh();setInterval(refresh,60000);
</script>
</body></html>
